imports:
    - { resource: common/asynchronous_indexing.yaml }
    - { resource: common/field_value_mappers.yaml }
    - { resource: common/page_indexing.yaml }

services:
    netgen.ibexa_search_extra.fulltext.configured_factory:
        class: Netgen\IbexaSearchExtra\Core\Search\Common\Query\ConfiguredFulltextCriterionFactory
        arguments:
            - '%netgen_ibexa_search_extra.fulltext.boost%'

    Netgen\IbexaSearchExtra\Core\Search\Common\Query\ConfiguredFulltextCriterionFactory:
        alias: netgen.ibexa_search_extra.fulltext.configured_factory

    Netgen\IbexaSearchExtra\Core\FieldType\BinaryFile\SearchField:
        decorates: Ibexa\Core\FieldType\BinaryFile\SearchField
        arguments:
            $innerField: '@.inner'
            $fileTextExtractor: '@Netgen\IbexaSearchExtra\Core\Search\Common\PageIndexing\TextExtractor\FileTextExtractor'

    Netgen\IbexaSearchExtra\Core\Search\Common\PageIndexing\TextExtractor\FileTextExtractor:
        arguments:
            - '@ibexa.field_type.ezbinaryfile.io_service'
            - '%kernel.project_dir%'
            - 'vendor/netgen/ibexa-search-extra/bin/tika-app-3.2.0.jar'
            - '%netgen_ibexa_search_extra.file_text_extraction.java_executable_path%'
            - '%netgen_ibexa_search_extra.file_text_extraction.allowed_mime_types%'
