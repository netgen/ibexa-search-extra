services:
    netgen.ibexa_search_extra.page_indexing.text_extractor:
        class: Netgen\IbexaSearchExtra\Core\Search\Common\PageIndexing\TextExtractor\NativeTextExtractor
        arguments:
            - '@Ibexa\Contracts\Core\Persistence\Content\Handler'
            - '@Ibexa\Bundle\Core\Routing\UrlAliasRouter'
            - '@netgen.ibexa_search_extra.page_indexing.config_resolver'
        calls:
            - setLogger: ['@?logger']

    netgen.ibexa_search_extra.page_indexing.config_resolver:
        class: Netgen\IbexaSearchExtra\Core\Search\Common\PageIndexing\ConfigResolver
        arguments:
            - '@Ibexa\Contracts\Core\Persistence\Content\Handler'
            - '@Ibexa\Contracts\Core\Persistence\Content\Location\Handler'
            - '%netgen_ibexa_search_extra.page_indexing.sites%'

    netgen.ibexa_search_extra.page_indexing.command.index_pages:
        class: Netgen\Bundle\IbexaSearchExtraBundle\Command\IndexPagesCommand
        tags:
            - { name: console.command }
        arguments:
            - '@Ibexa\Contracts\Core\Repository\ContentService'
            - '@ibexa.spi.search'
            - '@ibexa.api.persistence_handler'
            - '%netgen_ibexa_search_extra.page_indexing.sites%'

    netgen.ibexa_search_extra.page_indexing.field_mapper:
        class: Netgen\IbexaSearchExtra\Core\Search\Common\PageIndexing\FieldMapper
        arguments:
            - '@netgen.ibexa_search_extra.page_indexing.text_extractor'
            - '@Ibexa\Contracts\Core\Persistence\Content\Type\Handler'
            - '@netgen.ibexa_search_extra.page_indexing.config_resolver'
