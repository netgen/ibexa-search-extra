services:
    netgen_test.ibexa_search_extra.solr.subdocument_mapper.content:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\SubdocumentMapper\TestContentSubdocumentMapper
        tags:
            - { name: netgen.ibexa_search_extra.solr.subdocument_mapper.content }

    netgen_test.ibexa_search_extra.solr.subdocument_mapper.content_translation:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\SubdocumentMapper\TestContentTranslationSubdocumentMapper
        tags:
            - { name: netgen.ibexa_search_extra.solr.subdocument_mapper.content_translation }

    netgen_test.ibexa_search_extra.solr.subdocument_mapper.content.sort:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\SubdocumentMapper\TestSortContentSubdocumentMapper
        tags:
            - { name: netgen.ibexa_search_extra.solr.subdocument_mapper.content }

    netgen_test.ibexa_search_extra.solr.event_subscriber.child_updates_parent:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Common\EventSubscriber\TestChildUpdatesParent
        arguments:
            - '@ibexa.spi.search'
            - '@ibexa.api.persistence_handler'
        tags:
            - { name: kernel.event_subscriber }

    Symfony\Component\EventDispatcher\EventDispatcher:
        calls:
            - ['addSubscriber', ['@netgen_test.ibexa_search_extra.solr.event_subscriber.child_updates_parent']]
            - ['addSubscriber', ['@Ibexa\Core\Search\Common\EventSubscriber\ContentEventSubscriber']]
            - ['addSubscriber', ['@Ibexa\Core\Search\Common\EventSubscriber\LocationEventSubscriber']]
            - ['addSubscriber', ['@Ibexa\Core\Search\Common\EventSubscriber\ObjectStateEventSubscriber']]
            - ['addSubscriber', ['@Ibexa\Core\Search\Common\EventSubscriber\SectionEventSubscriber']]
            - ['addSubscriber', ['@Ibexa\Core\Search\Common\EventSubscriber\TrashEventSubscriber']]
            - ['addSubscriber', ['@Ibexa\Core\Search\Common\EventSubscriber\UserEventSubscriber']]

    netgen_test.ibexa_search_extra.solr.field_mapper.content:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\FieldMapper\TestContentFieldMapper
        arguments:
            - '@Ibexa\Contracts\Core\Persistence\Content\Handler'
            - '@Ibexa\Contracts\Core\Persistence\Content\Type\Handler'
            - '@Ibexa\Core\Search\Legacy\Content\Handler'
        tags:
            - { name: ibexa.search.solr.field.mapper.content }

    netgen_test.ibexa_search_extra.solr.field_mapper.location:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\FieldMapper\TestLocationFieldMapper
        arguments:
            - '@Ibexa\Contracts\Core\Persistence\Content\Handler'
            - '@Ibexa\Contracts\Core\Persistence\Content\Type\Handler'
            - '@Ibexa\Core\Search\Legacy\Content\Handler'
        tags:
            - { name: ibexa.search.solr.field.mapper.location }

    netgen.ibexa_search_extra.solr.field_mapper.location.location_priority:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\FieldMapper\LocationPriorityFieldMapper
        arguments:
          [
              '@Ibexa\Contracts\Core\Persistence\Content\Type\Handler',
              '@Ibexa\Contracts\Core\Persistence\Content\Handler',
              '@Ibexa\Core\Persistence\Legacy\Filter\Handler\ContentFilteringHandler',
              '@Ibexa\Contracts\Core\Persistence\Content\Location\Handler',
              '%netgen.ibexa_search_extra.descendant_indexing.configuration%'
          ]
        tags:
            - { name: netgen.ibexa_search_extra.solr.field_mapper.descendant_indexing.location }


    netgen.ibexa_search_extra.solr.field_mapper.content.section:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\FieldMapper\SectionFieldMapper
        arguments:
          [
              '@Ibexa\Contracts\Core\Persistence\Content\Type\Handler',
              '@Ibexa\Core\Persistence\Legacy\Filter\Handler\ContentFilteringHandler',
              '%netgen.ibexa_search_extra.descendant_indexing.configuration%',
          ]
        tags:
            - { name: netgen.ibexa_search_extra.solr.field_mapper.descendant_indexing.content }


    netgen.ibexa_search_extra.solr.field_mapper.content.object_state:
        class: Netgen\IbexaSearchExtra\Tests\Integration\Implementation\Solr\FieldMapper\ObjectStateFieldMapper
        arguments:
          [
              '@Ibexa\Contracts\Core\Persistence\Content\Type\Handler',
              '@Ibexa\Core\Persistence\Legacy\Filter\Handler\ContentFilteringHandler',
              '@Ibexa\Contracts\Core\Persistence\Content\ObjectState\Handler',
              '%netgen.ibexa_search_extra.descendant_indexing.configuration%'
          ]
        tags:
            - { name: netgen.ibexa_search_extra.solr.field_mapper.descendant_indexing.content }
